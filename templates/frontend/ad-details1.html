{% extends 'layouts/base.html' %}

{% block carousel_block %}
{% load static %}
{% load humanize %}
    <link href="{% static "search/css/main.css" %}" rel="stylesheet" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <style type="text/css">
        .text-muted{
            color:black !important;
            font-weight:bold;
        }
        .tagType li:hover{
            background-color: #ec1f27;
            cursor: pointer;
            color: white;
        }
        .form-control{
            color:black !important;
        }
        .tagType li:hover{
            background-color: #ec1f27;
            cursor: pointer;
            color: white;
        }
        .nav_active{
            background-color:#4a4747 !important;

        }
        /*Autocompolete*/

        .autocomplete {
          position: relative;
          display: inline-block;
        }

        input {
          border: 1px solid transparent;
          background-color: #f1f1f1;
          padding: 10px;
          font-size: 16px;
        }

        input[type=text] {
          background-color: #f1f1f1;
          width: 100%;
        }

        input[type=submit] {
          background-color: DodgerBlue;
          color: #fff;
          cursor: pointer;
        }

        .autocomplete-items {
          position: absolute;
          border: 1px solid #d4d4d4;
          border-bottom: none;
          border-top: none;
          z-index: 99;
          /*position the autocomplete items to be the same width as the container:*/
          top: 100%;
          left: 0;
          right: 0;
        }

        .autocomplete-items div {
          padding: 10px;
          cursor: pointer;
          background-color: #fff;
          border-bottom: 1px solid #d4d4d4;
        }

        /*when hovering an item:*/
        .autocomplete-items div:hover {
          background-color: #e9e9e9;
        }

        /*when navigating through the items using the arrow keys:*/
        .autocomplete-active {
          background-color: DodgerBlue !important;
          color: #ffffff;
        }
        .autocomplete-items{
            max-height:200px;
            overflow-y : scroll;
        }
    </style>
    <style>
    	form{
    		z-index: -999;
    	}
    	.contact{
    		z-index: 999;
    	}
    	table tr td{
    		width: 30%;
    		padding:5px 10px 5px 10px;
    	}
    	.water_mark{
    		/*background-color: rgb(0,0,0,1.2);*/
    		width: 60%;
    		z-index: 99999;
    		/*margin-top: -80px;*/
    		margin-left:60%;
    	}
    </style>
    <section>
        <div class="container">
            <div class="row" style="margin-top: 7%;margin-left: 5px; margin-bottom:7px;">
                <div class="btn-group btn-breadcrumb">
                    <a  href="#" data-toggle="modal" data-target="#searchModal" class="btn btn-danger" style="background-color:#ec1f27;"><i class="glyphicon glyphicon-search"></i> Back To Search </a>
                    <!--<a href="#" class="btn btn-danger"><i class="glyphicon glyphicon-home"></i></a>-->
                    <a href="{% url 'home' %}" class="btn btn-success">Home</a>
                    <a href="{% url 'AddList' %}" class="btn btn-info">Properties</a>
                    <a href="#" class="btn btn-default">{{title}}</a>
                </div>
            </div>
        </div>
    </section>
{% endblock %}
{% load humanize %}
{% block body_block %}
<!--Section-->
<section class="sptb">
	<div class="container" style="margin-top:-25px;">
	    {% if messages %}
        <ul class="messages">
            {% for message in messages %}
            <li>
                <div class="alert alert-{{message.level_tag}}" id="msg">
                    {{ message }}
                </div>
            </li>
            {% endfor %}
        </ul>
        {% endif %}
		<div class="row">
			<div class="col-xl-8 col-lg-8 col-md-12">
				<!--Classified Description-->
				<div class="card overflow-hidden">
				    <!--<div class="ribbon ribbon-top-right text-danger"><span class="bg-danger">Sold Out</span></div>-->
				    {% if properties.Status == '2' %}
					<div class="ribbon ribbon-top-right text-danger"><span class="bg-danger" style="font-size:19px;">Sold Out</span></div>
					{% elif properties.Status == '3' %}
					<div class="ribbon ribbon-top-right text-warning"><span class="bg-warning" style="font-size:19px;">Rented</span></div>
                    {% endif %}
					<div class="card-body">
						<div class="item-det mb-4">
							<a href="#" class="text-dark"><h3 class="" style="font-size:19px; letter-spacing:1.2px;">{{properties.Property_title}} || <span style="font-size:13px;">Property Code : #0{{properties.id}}</span></h3></a>
							<ul class="d-flex">
								<li class="mr-5"><a href="#" class="icons"><i class="icon icon-briefcase text-muted mr-1"></i> {{properties.Property_tag_type}}</a></li>
								<li class="mr-5"><a href="#" class="icons" style="font-size:15px;"><i class="icon icon-location-pin text-muted mr-1"></i>{{ properties.location }}</a></li>
								<li class="mr-5"><a href="#" class="icons"><i class="icon icon-calendar text-muted mr-1"></i> {{properties.Posted_time|naturaltime}}</a></li>
								{% if properties.Purpose == '1' %}
								<li class="mr-5"><a href="#" class="icons"><i class="fa fa-assistive-listening-systems text-muted mr-1"></i> Buy </a></li>
								{% elif properties.Purpose == '3' %}
								<li class="mr-5"><a href="#" class="icons"><i class="fa fa-assistive-listening-systems text-muted mr-1"></i> Sell</a></li>
								{% else %}
								<li class="mr-5"><a href="#" class="icons"><i class="fa fa-assistive-listening-systems text-muted mr-1"></i> Rent</a></li>
								{% endif %}
								{% if checkWish %}
                                <li class="mr-5"><a href="/wish-list/remove-wish/{{properties.id}}" class="icons"><i class="fa fa fa-heart mr-1" style="color:#ec1f27;;"></i> Saved </a></li>
                                {% else %}
                                <li class="mr-5"><a href="/check_wish_list/{{ properties.id }}" class="icons"><i class="fa fa fa-heart-o text-muted mr-1"></i> Save </a></li>
                                {% endif %}
								<!--<li class=""><a href="#" class="icons">-->
								<!--<i class="fa fa-star text-warning"></i>-->
								<!--<i class="fa fa-star text-warning"></i>-->
								<!--<i class="fa fa-star text-warning"></i>-->
								<!--<i class="fa fa-star text-warning"></i>-->
								<!--<i class="fa fa-star-half-o text-warning mr-1"></i>4.5</a></li>-->
							</ul>
						</div>
						<div class="product-slider">
							<div id="carousel" class="carousel slide" data-ride="carousel">
								<div class="arrow-ribbon2 bg-primary">{{properties.Price|floatformat:0|intcomma}} Tk</div>
								<div class="carousel-inner">
									<div class="carousel-item active">
										<img src="/{{active_image.Image}}" alt="img" style="height:500px; width:100%;">
										<div class="water_mark">
											<img src="{% static '/images/brand/101.png' %}" style="width: 40%;margin-top:-90%;opacity: 0.5">
										</div>
									</div>
									{% for pro_image in property_image %}
									<div class="carousel-item">
										<img src="/{{pro_image.Image}}" alt="img" style="height:500px; width:100%;">
										<div class="water_mark">
											<img src="{% static '/images/brand/101.png' %}" style="width: 40%;margin-top:-90%;opacity: 0.5">
										</div>
									</div>
									{% endfor %}
								</div>
								<a class="carousel-control-prev" href="#carousel" role="button" data-slide="prev">
									<i class="fa fa-angle-left" aria-hidden="true"></i>
								</a>
								<a class="carousel-control-next" href="#carousel" role="button" data-slide="next">
									<i class="fa fa-angle-right" aria-hidden="true"></i>
								</a>
							</div>
							<div class="clearfix">
								<div id="thumbcarousel" class="carousel slide" data-interval="false">
									<div class="carousel-inner">
										<div class="carousel-item active">
											{% for pro_image in property_image %}
											<div href="#" data-toggle="modal" data-target="#lightbox{{pro_image.id}}" data-target="#carousel" data-slide-to="0" class="thumb">
												<img src="/{{pro_image.Image}}" alt="img" style="height:100px;">
											</div>
											{% endfor %}
										</div>
										<div class="carousel-item">
											{% for pro_image in property_image %}
											<div href="#" data-toggle="modal" data-target="#lightbox{{pro_image.id}}" data-slide-to="0" class="thumb">
												<img src="/{{pro_image.Image}}" alt="img" style="height:100px;">
											</div>
											{% endfor %}
										</div>
									</div>
									<a class="carousel-control-prev" href="#thumbcarousel" role="button" data-slide="prev">
										<i class="fa fa-angle-left" aria-hidden="true"></i>
									</a>
									<a class="carousel-control-next" href="#thumbcarousel" role="button" data-slide="next">
										<i class="fa fa-angle-right" aria-hidden="true"></i>
									</a>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="border-0">
					<div class="wideget-user-tab wideget-user-tab3">
						<div class="tab-menu-heading">
							<div class="tabs-menu1">
								<ul class="nav">
									<li class=""><a href="#tab-1" class="active" data-toggle="tab">Overview</a></li>
									<li><a href="#tab-3" data-toggle="tab" class="">Facilities</a></li>
									<li><a href="#tab-4" data-toggle="tab" class="">Information</a></li>
									<li><a href="#tab-5" data-toggle="tab" class="">Video</a></li>
								</ul>
							</div>
						</div>
					</div>
					<div class="tab-content border-0 p-5 bg-white details-tab-content">
						<div class="tab-pane active" id="tab-1">
							<h3 class="card-title mb-3 font-weight-semibold">Description</h3>
							<div class="mb-4">
								<p>{{properties.Description}}</p>
							</div>
							<h4 class="mb-4">Specifications</h4>
							<div class="row">
								<div class="col-xl-12 col-md-12">
									<div class="table-responsive" style="overflow-x:hidden;">
										<div class="row">
											<div class="col-md-6">
												<table class="table-bordered border-top mb-0">
													<tbody>
														<tr>
															<td>Total Floor</td>
															<td><span class="font-weight-bold">{{properties.totalFloor}}</span></td>
														</tr>
														<tr>
															<td>Listed By </td>
															<td><span class="font-weight-bold">{{properties.Posted_by}}</span></td>
														</tr>
														<tr>
															<td>Price </td>
															<td><span class="font-weight-bold" style="color: #ec1f27;;font-weight: bold;">{{properties.Price|floatformat:0|intcomma}} Tk</span></td>
														</tr>
														<tr>
															<td>BedRooms </td>
															<td><span class="font-weight-bold">{{properties.Bed}}</span></td>
														</tr>
													</tbody>
												</table>
											</div>
											<div class="col-md-6">
												<table class='table-bordered border-top mb-0'>
													<tbody>
														<tr>
															<td>BathRooms</td>
															<td><span class="font-weight-bold">{{properties.Bath}}</span></td>
														</tr>
														<tr>
															<td>Belcony</td>
															<td><span class="font-weight-bold">{{properties.Belcony}}</span></td>
														</tr>
														<tr>
															<td>Facing </td>
															<td><span class="font-weight-bold">{{properties.Facing}}</span></td>
														</tr>
														<tr>
															<td>Property Floor </td>
															<td><span class="font-weight-bold">{{properties.Property_lebel}}</span></td>
														</tr>
														<tr>
															<td>Property Condition </td>
															<td><span class="font-weight-bold btn btn-primary btn-block" style="padding:0px">{{properties.Condition}}</span></td>
														</tr>
													</tbody>
												</table>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="tab-pane" id="tab-3">
							<div class="row">
								<div class="col-xl-12 col-md-12">
									<div class="table-responsive">
										<table class="table-bordered border-top mb-0">
											<tbody>
												{% for Fecility in Fecilities %}
    												{% for pro_fecility in property_fecilities%}
        												{% if Fecility.id == pro_fecility.ficilities_id %}
        												<tr>
        													<td>{{Fecility.facilitie_name}}</td>
        													<td><i class="fa fa-check-circle text-success"></i></td>
        												</tr>
        												{% endif %}
    												{% endfor %}
												{% endfor %}
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
						<div class="tab-pane" id="tab-4">
							<div class="row">
								<div class="col-md-12">
									<div class="table-responsive" style="overflow-x: hidden;">
										<div class="row">
											<div class="col-md-6">
												<table class="table-bordered border-top mb-0">
													<tbody>
														<tr>
															<td>City</td>
															<td><span class="font-weight-bold">{{ properties.City }}</span></td>
														</tr>
														<tr>
															<td>Area</td>
															<td><span class="font-weight-bold"> {{ properties.Area }}, {{ properties.location }}</span></td>
														</tr>
														<tr>
															<td>Total Floor</td>
															<td><span class="font-weight-bold">{{properties.totalFloor}}</span></td>
														</tr>
														<tr>
															<td>Bathrooms</td>
															<td><span class="font-weight-bold">{{properties.Bath}}</span></td>
														</tr>
														<tr>
															<td>Carpet Area</td>
															<td><span class="font-weight-bold">{{properties.Size}} {{properties.Unit}}</span></td>
														</tr>
														<tr>
															<td>Purpose</td>
															{% if properties.Purpose == '1' %}
															<td><span class="font-weight-bold">Buy</span></td>
															{% elif properties.Purpose == '3' %}
															<td><span class="font-weight-bold">Sell</span></td>
															{% else %}
															<td><span class="font-weight-bold">Rent</span></td>
															{% endif %}
														</tr>
														<tr>
															<td>Property Tags</td>
															<td>
																{% for property_tag in get_property_tags %}
																<p class="font-weight-bold text-center" style="background-color: #ec1f27;;padding: 5px;line-height: 1; color:white;margin-bottom: 2px;border-radius: 20px;">{{property_tag.tags}}</p>
																{% endfor %}
															</td>
														</tr>
													</tbody>
												</table>
											</div>
											<div class="col-md-6">
												<table class="table-bordered border-top mb-0">
													<tbody>
														<tr>
															<td>Facing</td>
															<td><span class="font-weight-bold">{{properties.Facing}}</span></td>
														</tr>
														<tr>
															<td>Bed Rooms</td>
															<td><span class="font-weight-bold">{{properties.Bed}}</span></td>
														</tr>
														<!-- <tr>
															<td>Balcony</td>
															<td><span class="font-weight-bold">2</span></td>
														</tr> -->
														<tr>
															<td>Car Parking</td>
															<td><span class="font-weight-bold">{{properties.Car_parking}}</span></td>
														</tr>
														{% for pro_fecilities in property_fecilities %}
														<tr>
															<td>{{pro_fecilities.ficilities.facilitie_name}}</td>
															<td><span class="font-weight-bold">Yes</span></td>
														</tr>
														{% endfor %}
													</tbody>
												</table>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="tab-pane" id="tab-5">
							<ul class="list-unstyled video-list-thumbs row ">
								<li class="mb-0">
									<a data-toggle="modal" data-target="#homeVideo">
									    {% if active_video.property_video %}
										<video controls class="img-responsive">
											<source src="/{{active_video.property_video}}" type="video/mp4">
											<source src="/{{active_video.property_video}}" type="video/ogg">
										</video>
										{% else %}
										<h4 style="color:#ec1f27;;">No Video Uploaded ....... </h4>
										{% endif %}
									</a>
								</li>
							</ul>
						</div>
					</div>
					<div class="pt-4 pb-4 pl-5 pr-5 border-top bg-white">
						<div class="list-id">
							<div class="row">
								<!--<div class="col">-->
								<!--	<a class="mb-0">Classified ID : #8256358</a>-->
								<!--</div>-->
								<div class="col col-auto">
									Posted By <a class="mb-0 font-weight-bold"><span style="color: #ec1f27;">{{properties.Posted_by}}</span></a> - {{properties.Posted_time}}
								</div>
							</div>
						</div>
					</div>
					<!-- <div class="card-footer bg-white details-tab">
						<div class="icons">
							<a href="#" class="btn btn-info icons"><i class="icon icon-share mr-1"></i> Share Ad</a>
							<a href="#" class="btn btn-primary icons"><i class="icon icon-heart  mr-1"></i> 678</a>
							<a href="#" class="btn btn-secondary icons"><i class="icon icon-printer  mr-1"></i> Print</a>
						</div>
					</div> -->
				</div>
				<h3 class="mb-5 mt-4">Latest Posts</h3>
				<!--Latest Posts-->
				<div id="myCarousel1" class="owl-carousel owl-carousel-icons3">
					<!-- Wrapper for carousel items -->
					{% for latest_property in latest_properties %}
					<div class="item">
						<div class="card">
							{% if latest_property.Purpose == '1' %}
								<div class="arrow-ribbon bg-secondary"> Buy</div>
							{% elif latest_property.Purpose == '2' %}
								<div class="arrow-ribbon bg-secondary"> Rent</div>
							{% else %}
								<div class="arrow-ribbon bg-secondary"> Sale</div>
							{% endif %}

							<div class="item-card7-imgs">
								<a href="/ADDetails/{{ latest_property.id }}"></a>
								<img src="/{{latest_property.Thumbnail}}" alt="img" class="cover-image" style="height:200px;">
							</div>
							<div class="item-card7-overlaytext">
								<a href="/ADDetails/{{ latest_property.id }}" class="text-white">{{latest_property.Category}}</a>
								<h4 class=" mb-0">{{latest_property.Price|floatformat:0|intcomma}} Tk</h4>
							</div>
							<div class="card-body" style="height:200px;">
								<div class="item-card7-desc">
									<a href="/ADDetails/{{ latest_property.id }}" class="text-dark"><h4 class="font-weight-semibold">{{latest_property.Property_title}}</h4></a>
								</div>
								<div class="item-card7-text" style="padding-top:30px;">
									<ul class="icon-card mb-0">
									    <li><a href="#" style="font-size:15px;"><i class="fa fa-arrows-alt text-muted mr-1"></i> {{latest_property.Size}} {{latest_property.Unit}}</a></li>
                                        <li><a href="#" class="icons" style="font-size:15px;"><i class="fa fa-bed text-muted mr-1"></i> {{latest_property.Bed}} Beds</a>
                                        </li>
                                        <li><a href="#" class="icons" style="font-size:15px;"><i class="fa fa-bath text-muted mr-1"></i> {{latest_property.Bath}} Bath</a>
                                        </li>
                                        <li><a href="#" class="icons" style="font-size:15px;"><i class="fa fa-fire text-muted mr-1"></i> {{latest_property.Belcony}} Belcony</a>
                                        </li>
									</ul>
								</div>
							</div>
						</div>
					</div>
					{% endfor %}
				</div>
				<!--/Latest Posts-->

                <h3 class="mb-5 mt-4">Related Posts</h3>
				<!--Related Posts-->
				<div id="myCarousel1" class="owl-carousel owl-carousel-icons3">
					<!-- Wrapper for carousel items -->
					{% for related_property in related_properties %}
					<div class="item">
						<div class="card">
							{% if related_property.Purpose == '1' %}
								<div class="arrow-ribbon bg-secondary"> Buy</div>
							{% elif related_property.Purpose == '2' %}
								<div class="arrow-ribbon bg-secondary"> Rent</div>
							{% else %}
								<div class="arrow-ribbon bg-secondary"> Sale</div>
							{% endif %}

							<div class="item-card7-imgs">
								<a href="/ADDetails/{{ related_property.id }}"></a>
								<img src="/{{related_property.Thumbnail}}" alt="img" class="cover-image" style="height:200px;">
							</div>
							<div class="item-card7-overlaytext">
								<a href="/ADDetails/{{ related_property.id }}" class="text-white">{{related_property.Category}}</a>
								<h4 class=" mb-0">{{related_property.Price|floatformat:0|intcomma}} Tk</h4>
							</div>
							<div class="card-body" style="height:200px;">
								<div class="item-card7-desc">
									<a href="/ADDetails/{{ related_property.id }}" class="text-dark"><h4 class="font-weight-semibold">{{related_property.Property_title}}</h4></a>
								</div>
								<div class="item-card7-text" style="padding-top:30px;">
									<ul class="icon-card mb-0">
									    <li><a href="#" style="font-size:15px;"><i class="fa fa-arrows-alt text-muted mr-1"></i> {{related_property.Size}} {{related_property.Unit}}</a></li>
                                        <li><a href="#" class="icons" style="font-size:15px;"><i class="fa fa-bed text-muted mr-1"></i> {{related_property.Bed}} Beds</a>
                                        </li>
                                        <li><a href="#" class="icons" style="font-size:15px;"><i class="fa fa-bath text-muted mr-1"></i> {{related_property.Bath}} Bath</a>
                                        </li>
                                        <li><a href="#" class="icons" style="font-size:15px;"><i class="fa fa-fire text-muted mr-1"></i> {{related_property.Belcony}} Belcony</a>
                                        </li>
									</ul>
								</div>
							</div>
						</div>
					</div>
					{% endfor %}
				</div>
			</div>
			<!--Right Side Content-->
			<div class="col-xl-4 col-lg-4 col-md-12">
				<div class="card contact" style="position: fixed;width:30%;height: 400px;">
					<div class="card-body item-user">
						<p class="mb-4" style="text-align: center;border-bottom: 1px solid lightgray;padding-bottom: 10px;">
							<img src="/{{com_details.logo}}" style="width: 40%;"></p>
						<div style="">
							<form action="{% url 'send_message' %}" method="POST" enctype="multipart/form-data">
	                            {% csrf_token %}
	                            <div class="">
	                                <div class="">
	                                    <div class="form-group" style="margin-bottom: 3px;">
	                                        <input type="text" class="form-control" id="name1" placeholder="Your Name" name="name" value="" required="">
	                                    </div>
	                                    <div class="form-group" style="margin-bottom: 3px;">
	                                        <input type="email" class="form-control" placeholder="Your Email Address" name="email" value="" required="">
	                                    </div>
	                                    <div class="form-group" style="margin-bottom: 3px;">
	                                        <input type="test" class="form-control" placeholder="Your Phone No." name="phone" value="" required="">
	                                    </div>
	                                    <div class="form-group">
	                                        <input type="text" class="form-control" placeholder="Subject" name="subject" value="{{properties.Property_title}} #{{properties.id}}" readonly="" required="">
	                                    </div>
	                                    <div class="form-group" style="margin-bottom: 6px;">
	                                        <textarea class="form-control" name="message" rows="4" placeholder="Message" required="" style="text-align:left;color:black;">I would like to request for your property (ID: #{{properties.id}} ). Please contact me as quick as convenience.</textarea>
	                                    </div>
	                                    <div class="text-left">
	                                        <button type="submit" class="btn btn-primary" style="border-radius: 0px;width: 33%;">
	                                            Send mail
	                                        </button>
	                                        <a href="http://www.facebook.com/sharer/sharer.php?u={{request.scheme}}://{{request.get_host}}/ADDetails/{{ properties.id|urlencode }}" target="_blank" class="btn btn-info" style="border-radius: 0px;width: 32%;">
											    <i class="fa fa-facebook"></i> Share
											</a>
											<a href="#" data-toggle="modal" data-target="#call" class="btn btn-default callusbtn" style="border-radius: 0px;width: 33%;background-color:#43aa8b;color:white;">
											    <i class="fa fa-phone"></i> Call Us
											</a>
	                                    </div>
	                                </div>
	                            </div>
	                        </form>
						</div>
						<div class=" item-user-icons mt-4">
							<a href="https://www.facebook.com/jamspropertycom" class="facebook-bg mt-0" target="_blank"><i class="fa fa-facebook"></i></a>
							<a href="https://www.youtube.com/channel/UCuno8JW0lkVTbzyxy_tTWeA?view_as=subscriber" class="twitter-bg"><i class="fa fa-youtube"></i></a>
							<a href="https://twitter.com/JamspropertyC" class="bg-linkedin"><i class="fa fa-twitter" style="color:white;"></i></a>
							<a href="https://www.linkedin.com/company/jamsproperty" class="dribbble-bg" target="_blank"><i class="fa fa-linkedin"></i></a>
						</div>
					</div>
				</div>
				<!--<div class="card">-->
				<!--	<div class="card-header">-->
				<!--		<h3 class="card-title">Latest Properties</h3>-->
				<!--	</div>-->
				<!--	<div class="card-body pb-3">-->
				<!--		<div class="rated-products">-->
				<!--			<ul class="vertical-scroll">-->
    <!--                            {% for latest_property in latest_properties %}-->
				<!--				<li class="item">-->
				<!--					<div class="media m-0 mt-0 p-5">-->
				<!--						<img class="mr-4" src="../{{latest_property.Thumbnail}}" alt="img">-->
				<!--						<div class="media-body">-->
				<!--							<h4 class="mt-2 mb-1"><a href="/ADDetails/{{latest_property.id}}">{{latest_property.Property_title}}</a></h4>-->
				<!--							<span class="rated-products-ratings">-->
				<!--								<i class="fa fa-star text-warning"> </i>-->
				<!--								<i class="fa fa-star text-warning"> </i>-->
				<!--								<i class="fa fa-star text-warning"> </i>-->
				<!--								<i class="fa fa-star text-warning"> </i>-->
				<!--								<i class="fa fa-star text-warning"> </i>-->
				<!--							</span>-->
				<!--							<div class="h5 mb-0 font-weight-semibold mt-1">{{latest_property.Price}}</div>-->
				<!--						</div>-->
				<!--					</div>-->
				<!--				</li>-->
				<!--				{% endfor %}-->
				<!--			</ul>-->
				<!--		</div>-->
				<!--	</div>-->
				<!--</div>-->
				<!-- {% if advertisement %}
				<div class="card">
					<div class="card-header">
						<h3 class="card-title">{{advertisement.ad_title}}</h3>
					</div>
					<div class="card-body" style="padding:0px;">
						<img src="../{{advertisement.image}}" style="width: 100%;">
					</div>
				</div>
				{% endif %} -->
				<!--<div class="card">-->
				<!--	<div class="card-header">-->
				<!--		<h3 class="card-title">Tags</h3>-->
				<!--	</div>-->
				<!--	<div class="card-body">-->
				<!--		<div class="product-tags clearfix">-->
				<!--			<ul class="list-unstyled mb-0">-->
				<!--			    {% for populer_tag in populer_tags %}-->

				<!--				<li><a href="#">{{populer_tag.tag_name}}</a></li>-->

				<!--				{% endfor %}-->
				<!--			</ul>-->
				<!--		</div>-->
				<!--	</div>-->
				<!--</div>-->
				<!--<div class="card">-->
				<!--	<div class="card-header">-->
				<!--		<h3 class="card-title">Map location</h3>-->
				<!--	</div>-->
				<!--	<div class="card-body" style="padding:0px;">-->
				<!--		<div class="map1">-->
	   <!--                     <div class="map-header-layer" id="map">-->
    <!--                            <iframe width="100%" height="280" frameborder="0" scrolling="no" marginheight="0"-->
	   <!--                         marginwidth="0"-->
	   <!--                         src="https://maps.google.it/maps?q={{ properties.location }}&output=embed">-->
	   <!--                         </iframe>-->
	   <!--                     </div>-->
	   <!--                 </div>-->
				<!--	</div>-->
				<!--</div>-->
			</div>
			<!-- Modal -->
			<div class="modal fade" id="searchModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content" style="background-color: transparent;border:none;">
                        <div class="modal-body">
                            <div class="col-lg-12 col-xl-12 col-md-12">
                                <div class="s011" style="min-height: 300px;">
                                    <center>
                                        <form action="{% url 'search' %}" method="GET" enctype="multipart/form-data">
                                            <!--{% csrf_token %}-->
                                            <div class="inner-form" style="width: 111%;">
                                                <header>
                                                    <div class="row">
                                                        <div class="col-md-3"></div>
                                                        <div class="col-md-6">
                                                            <div class="travel-type-wrap">
                                                                <div class="item active" style="border-radius: 0px;" id="Buy">
                                                                    <span>Buy</span>
                                                                </div>

                                                                <a href="{% url 'property:AdProperty' %}">
                                                                    <div class="item" style="border-radius: 0px;" id="Sell">
                                                                    <span>Sell</span>
                                                                </div></a>

                                                                <div class="item" style="border-radius: 0px;" id="Rent">
                                                                    <span>Rent</span>
                                                                </div>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </header>
                                                <div class="main-form" id="main-form">
                                                    <div class="row second">
                                                        <div class="col-md-8 col-xs-12 col-sm-12 input-wrap">
                                                            <div class="" style="width: 100%;border-radius: 0px;">
                                                                <div class="icon-wrap">
                                                                    <i class="fa fa-compass" style="font-size: 14px;padding-top: 24px; color: lightgray;"></i>
                                                                </div>
                                                                <div class="input-field" style="margin-top: -.7rem !important;">
                                                                    <label style="margin-bottom: 0rem;padding-top: .5rem;">
                                                                        Location
                                                                    </label>
                                                                    <input type="search" id="myInput" class="form-control" placeholder="Search Property using Location" style="width: 100%;" name="location">
                                                                    <input type="hidden" class="form-control" placeholder="Search Property using Location" id="Purpose" name="purpose" style="width: 100%;" value="" />
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-4 col-xs-12 col-sm-12 input-wrap">
                                                            <div class="" style="width: 100%;border-radius: 0px;">
                                                                <div class="icon-wrap">
                                                                    <i class="fa fa-building" style="font-size: 12px;padding-top: 24px; color: lightgray;"></i>
                                                                </div>
                                                                <div class="input-field" style="margin-top: -.7rem!important;">
                                                                    <label style="margin-bottom: 0rem;padding-top: .5rem;">
                                                                        Property Type
                                                                    </label>
                                                                    <!--<select class="form-control" style="background-color: transparent;border:none;" name="property_type" id="employe">-->
                                                                    <!--    <option value="0">Select Property Type &nbsp; </option>-->
                                                                    <!--    {% for comm in Property_type_tags %}-->
                                                                    <!--    <option value="{{comm.id}}">{{comm.type_name}}</option>-->
                                                                    <!--    {% endfor %}-->
                                                                    <!--</select>-->
                                                                    <input type="hidden" class="form-control" name="property_type" value="0" id="property_type">
                                                                    <div class="dropdown" id="pro_cls_rev" style="position: relative;">
                                                                        <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown"><span id="tag_name">Property Type</span>
                                                                        <span class="caret"></span></button>
                                                                        <ul class="dropdown-menu property_cls" style="width: 400px;margin-left: -50%;" id="pro_cls" data-display="static">
                                                                            <div class="row" style="padding:20px;">
                                                                                <div class="col-md-4" id="commercial" style="background-color:#ec1f27;;color:white;padding:5px;text-align:center;cursor: pointer;">Commercial</div>
                                                                                <div class="col-md-4" id="residential" style="background-color:#ec1f27;;color:white;padding:5px;text-align:center;cursor: pointer;">Residential</div>
                                                                                <div class="col-md-4" id="land" style="background-color:#ec1f27;;color:white;padding:5px;text-align:center;cursor: pointer;">Land</div>
                                                                            </div>
                                                                            <div class="row">
                                                                                <div class="col-md-12" id="commercial_tag">
                                                                                    <li class="list-group-item text-center" style="border:none;">
                                                                                        <span style="line-height: 30px;">Commercial</span>
                                                                                        <ul class="list-group tagType">
                                                                                            <div class="row">
                                                                                            {% for Com in commercialTag %}
                                                                                            <div class="col-md-6">
                                                                                                <li class="list-group-item com_tag{{Com.id}}" style="line-height: 0px;">
                                                                                                    <span id="{{Com.tag_name}}">{{Com.tag_name}}</span>
                                                                                                    <span style="display: none;" id="{{Com.id}}">{{Com.id}}</span>
                                                                                                </li>
                                                                                                <script>
                                                                                                    $('.com_tag{{Com.id}}').click(function(){
                                                                                                        $.ajaxSetup({
                                                                                                                    headers: {
                                                                                                                        'X-CSRF-TOKEN': $('meta[name="_token"]').attr('content')
                                                                                                                    }
                                                                                                                });
                                                                                                        var com_tag_id =$('#{{Com.id}}').text();
                                                                                                        var com_tag    =$('#{{Com.tag_name}}').text();
                                                                                                        console.log(com_tag)
                                                                                                        $('#property_type').val(com_tag_id);
                                                                                                        $('#tag_name').text('Commercial - '+com_tag);
                                                                                                    });
                                                                                                </script>
                                                                                            </div>
                                                                                            {% endfor %}
                                                                                            </div>
                                                                                        </ul>
                                                                                    </li>
                                                                                </div>
                                                                                <div class="col-md-12" id="residential_tag">
                                                                                    <li class="list-group-item text-center" style="border:none;">
                                                                                        <span style="line-height: 30px;">Residential</span>
                                                                                        <ul class="list-group tagType">
                                                                                            <div class="row">
                                                                                            {% for Res in residentialTag %}
                                                                                            <div class="col-md-6">
                                                                                                <li class="list-group-item res_tag{{Res.id}}" style="line-height: 0px;"><span id="{{Res.tag_name}}">{{Res.tag_name}}</span><span style="display: none;"  id="{{Res.id}}">{{Res.id}}</span></li>
                                                                                                <script>
                                                                                                    $('.res_tag{{Res.id}}').click(function(){
                                                                                                        $.ajaxSetup({
                                                                                                                    headers: {
                                                                                                                        'X-CSRF-TOKEN': $('meta[name="_token"]').attr('content')
                                                                                                                    }
                                                                                                                });
                                                                                                        var com_tag_id =$('#{{Res.id}}').text();
                                                                                                        var com_tag    =$('#{{Res.tag_name}}').text();

                                                                                                        console.log(com_tag)
                                                                                                        $('#property_type').val(com_tag_id);
                                                                                                        $('#tag_name').text('Residential - '+com_tag);
                                                                                                    });
                                                                                                </script>
                                                                                            </div>
                                                                                            {% endfor %}
                                                                                            </div>
                                                                                        </ul>
                                                                                    </li>
                                                                                </div>
                                                                                <div class="col-md-12" id="land_tag">
                                                                                    <li class="list-group-item text-center" style="border:none;">
                                                                                        <span style="line-height: 20px;">Land</span>
                                                                                        <ul class="list-group tagType">
                                                                                            <div class="row">
                                                                                            {% for Land in landTag %}
                                                                                            <div class="col-md-6">
                                                                                            <li class="list-group-item land_tag{{Land.id}}" style="line-height: 0px;"><span id="{{Land.tag_name}}">{{Land.tag_name}}</span><span style="display: none;" id="{{Land.id}}">{{Land.id}}</span></li>
                                                                                            <script>
                                                                                                $('.land_tag{{Land.id}}').click(function(){
                                                                                                    $.ajaxSetup({
                                                                                                                headers: {
                                                                                                                    'X-CSRF-TOKEN': $('meta[name="_token"]').attr('content')
                                                                                                                }
                                                                                                            });
                                                                                                    var com_tag_id =$('#{{Land.id}}').text();
                                                                                                    var com_tag    =$('#{{Land.tag_name}}').text();
                                                                                                    console.log(com_tag_id)
                                                                                                    $('#property_type').val(com_tag_id);
                                                                                                    $('#tag_name').text('Land - '+com_tag);
                                                                                                });
                                                                                            </script>
                                                                                            </div>
                                                                                            {% endfor %}
                                                                                            </div>
                                                                                        </ul>
                                                                                    </li>
                                                                                </div>
                                                                            </div>
                                                                        </ul>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row second" style="margin-top: -15px;">
                                                        <div class="col-md-5 col-sm-12 col-xs-12 input-wrap">
                                                            <div class="" style="width: 100%;border-radius: 0px;">
                                                                <div class="icon-wrap">
                                                                  <i class="fa fa-money" style="font-size: 14px;padding-top: 24px; color: lightgray;"></i>
                                                                </div>
                                                                <div class="input-field" style="margin-top: -.7rem!important;">
                                                                    <label style="margin-bottom: 0rem;padding-top: .5rem;">Price (BDT)</label>
                                                                    <div class="row">
                                                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                                                          <input type="text" name="min" class="form-control" placeholder="Min Price" value="0" style="width: 100%;border-right:1px solid black;padding-right:10px;border-radius: 0px;" />
                                                                        </div>
                                                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                                                            <input type="text" name="max" value="500000000" class="form-control" placeholder="Max Price" style="width: 100%;border-radius: 0px;" />
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-2 col-sm-12 col-xs-12 input-wrap">
                                                            <div class="" style="width: 100%;border-radius: 0px;">
                                                                <div class="icon-wrap">
                                                                    <i class="fa fa-bed" style="font-size: 14px;padding-top: 24px; color: lightgray;"></i>
                                                                </div>
                                                                <div class="input-field" style="margin-top: -.7rem!important;">
                                                                    <label style="margin-bottom: 0rem;padding-top: .5rem;">Bed</label>
                                                                    <select class="form-control" style="background-color: transparent;border:none;" name="bed">
                                                                        <option value="5">All &nbsp; </option>
                                                                        <option value="1">1 &nbsp; </option>
                                                                        <option value="2">2 &nbsp; </option>
                                                                        <option value="3">3 &nbsp; </option>
                                                                        <option value="4">4 &nbsp; </option>
                                                                        <option value="5">5 &nbsp; </option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-5 col-sm-12 col-xs-12 input-wrap">
                                                            <div class="" style="width: 100%;border-radius: 0px;">
                                                                <div class="icon-wrap">
                                                                  <i class="fa fa-cube" style="font-size: 14px;padding-top: 24px; color: lightgray;"></i>
                                                                </div>
                                                                <div class="input-field" style="margin-top: -.7rem!important;">
                                                                    <label style="margin-bottom: 0rem;padding-top: .5rem;">Area (SQ.FT)</label>
                                                                    <div class="row">
                                                                        <div class="col-md-6">
                                                                          <input type="text" name="min_size" class="form-control" placeholder="Min SQ.FT" value="0" style="width: 100%;border-right:1px solid black;padding-right:10px;border-radius: 0px;" />
                                                                        </div>
                                                                        <div class="col-md-6">
                                                                            <input type="text" name="max_size" class="form-control" placeholder="Max SQ.FT" value="500000" style="width: 100%;border-radius: 0px;" />
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row last" style="margin-left: -23px;">
                                                        <div class="col-md-6">
                                                            <button style="float: left;background-color: #ec1f27;;" class="btn-search" type="submit"  data-dismiss="modal">Cancel</button>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <button style="float: right;" class="btn-search" type="submit">Search</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </center>
                                </div>
                            </div>
                        </div>
                        <!-- <div class="modal-footer">
                            <center>
                                <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
                            </center>
                        </div> -->
                    </div>
                </div>
            </div>
		    <div class="modal fade" id="contact" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		        <div class="modal-dialog modal-lg" style="width: 800px;">
		            <div class="modal-content">
		                <div class="modal-header">
		                    <h3 class="modal-title" id="myModalLabel" style="text-align: center;">inquiry about this product</h3>
		                    </div>
		                <div class="modal-body">
		                    {% if request.user.is_authenticated %}
		                    <div class="col-lg-12 col-xl-12 col-md-12">
		                        <form action="{% url 'send_message' %}" method="POST" enctype="multipart/form-data">
		                            {% csrf_token %}
		                            <div class="card mb-0">
		                                <div class="card-body">
		                                    <div class="form-group">
		                                        <input type="text" class="form-control" id="name1" placeholder="Your Name" name="name" value="{{ current_user.username }}" readonly="">
		                                        <!-- <input type="hidden" class="form-control" id="name1" placeholder="Your Name" name="id" value="{{ current_user.id }}" readonly=""> -->
		                                    </div>
		                                    <div class="form-group">
		                                        <input type="email" class="form-control"  placeholder="Email Address" name="email" value="{{ current_user.email }}" readonly="">
		                                    </div>
		                                    <div class="form-group">
		                                        <input type="test" class="form-control" placeholder="Your Phone No." name="phone" value="" required="">
		                                    </div>
		                                    <div class="form-group">
		                                        <input type="text" class="form-control" placeholder="Subject" name="subject" value="{{properties.Property_title}} #{{properties.id}}" required="" readonly="">
		                                    </div>
		                                    <div class="form-group">
		                                        <textarea class="form-control" name="message" rows="6" placeholder="Message" required="">I would like to request for your property (ID: #{{properties.id}} ). Please contact me as quick as convenience.</textarea>
		                                    </div>
		                                    <div class="text-left">
		                                        <button type="submit" class="btn btn-primary btn-lg br-tr-3  br-br-3">Send Message</button>
		                                    </div>
		                                </div>
		                            </div>
		                        </form>
		                    </div>
		                	{% else %}
		                    <div class="col-lg-12 col-xl-12 col-md-12">
		                        <form action="{% url 'send_message' %}" method="POST" enctype="multipart/form-data">
		                            {% csrf_token %}
		                            <div class="card mb-0">
		                                <div class="card-body">
		                                    <div class="form-group">
		                                        <input type="text" class="form-control" placeholder="Your Name" name="name" value="" required="">
		                                    </div>
		                                    <div class="form-group">
		                                        <input type="email" class="form-control" placeholder="Your Email Address" name="email" value="" required="">
		                                    </div>
		                                    <div class="form-group">
		                                        <input type="test" class="form-control" placeholder="Your Phone No." name="phone" value="" required="">
		                                    </div>
		                                    <div class="form-group">
		                                        <input type="text" class="form-control" placeholder="Subject" name="subject" value="{{properties.Property_title}} #{{properties.id}}" readonly="" required="">
		                                    </div>
		                                    <div class="form-group">
		                                        <textarea class="form-control" name="message" rows="6" placeholder="Message" required=""></textarea>
		                                    </div>
		                                    <div class="text-left">
		                                        <button type="submit" class="btn btn-primary btn-lg br-tr-3  br-br-3">Send Message</button>
		                                    </div>
		                                    <!--<div class="modal-footer">-->
                    		                <!--    <center>-->
                    		                <!--    	<button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>-->
                    		                <!--    </center>-->
                    		                <!--</div>-->
		                                </div>
		                            </div>
		                        </form>
		                    </div>
		                	{% endif %}
		                </div>
		            </div>
		        </div>
		    </div>
			<!--/Right Side Content-->
			<div class="btn-float" id="phone" style="margin-bottom:7%;">
                <button data-toggle="modal" data-target="#call" type="button" class="btn btn-danger btn-circle btn-xl btn-lateral" style="background-color:#ec1f27;"><i class="glyphicon glyphicon-phone-alt"></i></button>
            </div>
            <!-- ModalPhone -->
            <div class="modal fade" id="call" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-md">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 class="modal-title" id="myModalLabel" style="text-align: center;">Call Us For Details</h3>
                            </div>
                        <div class="modal-body">
                            <p><i class="fa fa-phone"></i> {{com_details.phone}} </p>
                        </div>
                        <div class="modal-footer">
                            <center>
                                <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
                            </center>
                        </div>
                    </div>
                </div>
            </div>
			{% for key in property_image %}
				<div class="modal fade" id="lightbox{{key.id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			        <div class="modal-dialog modal-lg" style="width: 500px;">
			            <div class="modal-content">
			                <div class="modal-header">
			                    <!--<h3 class="modal-title" id="myModalLabel" style="text-align: center;">inquiry about this product</h3>-->
			                </div>
			                <div class="modal-body">
			                    <div class="col-lg-12 col-xl-12 col-md-12">
			                        <img src="/{{key.Image}}" style="width:100%;max-height:450px;">
			                    </div>
			                </div>
			                <div class="modal-footer">
			                    <center>
			                    	<button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
			                    </center>
			                </div>
			            </div>
			        </div>
			    </div>
			{% endfor %}

		</div>
	</div>
</section>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script>
//     var map;
//       function initMap() {
//         map = new google.maps.Map(document.getElementById('map2'), {
//           center: {lat: -34.397, lng: 150.644},
//           zoom: 8
//         });
//       }

	$(document).scroll(function() {
	  var y = $(this).scrollTop();
	  if (y < 1650) {
	    $('.contact').fadeIn();
	  } else {
	    $('.contact').fadeOut();
	  }
	});
</script>
<script type="text/javascript">
    setTimeout(function(){
        if($('#msg').length > 0){
            $('#msg').remove();
        }
    }, 3000)
</script>
<!-- Section-->
<!--<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAb3fl_xn_huguXrNyxa-d2WntHE43y3Vs&callback=initMap"-->
<!--    async defer></script>-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="{% static "search/js/extention/choices.js" %}"></script>
<script>
    $('#commercial_tag').show();
    $('#land_tag').hide();
    $('#residential_tag').hide();
    $("#commercial").addClass('nav_active')

    $('#residential').click(function(){
        $('#commercial_tag').hide();
        $('#residential_tag').show();
        $('#land_tag').hide();
        $("#pro_cls").dropdown('toggle')
        $(".property_cls").addClass('top_margin')
        $("#residential").addClass('nav_active')
        $("#commercial").removeClass('nav_active')
        $("#land").removeClass('nav_active')
    });
    $('#commercial').click(function(){
        $('#commercial_tag').show();
        $('#residential_tag').hide();
        $('#land_tag').hide();
        $("#pro_cls").dropdown('toggle')
        $("#commercial").addClass('nav_active')
        $("#residential").removeClass('nav_active')
        $("#land").removeClass('nav_active')
    });
    $('#land').click(function(){
        $('#commercial_tag').hide();
        $('#residential_tag').hide();
        $('#land_tag').show();
        $("#pro_cls").dropdown('toggle')
        $("#land").addClass('nav_active')
        $("#residential").removeClass('nav_active')
        $("#commercial").removeClass('nav_active')
    });
    $('#Buy').click(function(){
        $.ajaxSetup({
                    headers: {
                        'X-CSRF-TOKEN': $('meta[name="_token"]').attr('content')
                    }
                });
        $('#Purpose').val(1);
    });
    // $('#Sell').click(function(){
    //     $.ajaxSetup({
    //                 headers: {
    //                     'X-CSRF-TOKEN': $('meta[name="_token"]').attr('content')
    //                 }
    //             });
    //     $('#Purpose').val(2);
    // });
    $('#Rent').click(function(){
        $.ajaxSetup({
                    headers: {
                        'X-CSRF-TOKEN': $('meta[name="_token"]').attr('content')
                    }
                });
        $('#Purpose').val(2);
    });
</script>
<script>
  const choices = new Choices('[data-trigger]',
  {
    searchEnabled: false,
    itemSelectText: '',
  });

</script>
<script src="{% static "search/js/extention/flatpickr.js" %}"></script>
<script>
    flatpickr(".datepicker",{
        dateFormat: "m/d/y"
    });
    var btnTypes = document.querySelectorAll('.travel-type-wrap .item')
    var mainForm = document.getElementById('main-form')
    for (let i = 0; i < btnTypes.length; i++){
        btnTypes[i].addEventListener('click', function(){
        for (let i = 0; i < btnTypes.length; i++){
            btnTypes[i].classList.remove('active')
        }btnTypes[i].classList.add('active')
        let className = 'type' + i
        mainForm.className = `${className} main-form`
        })
    }
</script>
<script>
    $('#sort_by').change(function(){
        $.ajaxSetup({
                    headers: {
                        'X-CSRF-TOKEN': $('meta[name="_token"]').attr('content')
                    }
                });
        var sort = $('#sort_by option:selected').val();


        if(sort>0){
            window.location.replace("/sort_by/"+sort);
        }else{
            console.log(sort)
        }
    });
</script>
<script type="text/javascript">
    setTimeout(function(){
        if($('#msg').length > 0){
            $('#msg').remove();
        }
    }, 3000)
</script>
<!--/Section-->
<script>
    var countries = [];
    function autocomplete(inp, arr) {
      var currentFocus;
      inp.addEventListener("input", function(e) {
          var a, b, i, val = this.value;
          closeAllLists();
          if (!val) { return false;}
          currentFocus = -1;
          a = document.createElement("DIV");
          a.setAttribute("id", this.id + "autocomplete-list");
          a.setAttribute("class", "autocomplete-items");
          this.parentNode.appendChild(a);
          for (i = 0; i < arr.length; i++) {
            if (arr[i].substr(0, val.length).toUpperCase() == val.toUpperCase()) {
              b = document.createElement("DIV");
              b.innerHTML = "<strong>" + arr[i].substr(0, val.length) + "</strong>";
              b.innerHTML += arr[i].substr(val.length);
              b.innerHTML += "<input type='hidden' value='" + arr[i] + "'>";
              b.addEventListener("click", function(e) {
                  inp.value = this.getElementsByTagName("input")[0].value;
                  closeAllLists();
              });
              a.appendChild(b);
            }
          }
      });
      inp.addEventListener("keydown", function(e) {
          var x = document.getElementById(this.id + "autocomplete-list");
          if (x) x = x.getElementsByTagName("div");
          if (e.keyCode == 40) {
            currentFocus++;
            addActive(x);
          } else if (e.keyCode == 38) {
            currentFocus--;
            addActive(x);
          } else if (e.keyCode == 13) {
            e.preventDefault();
            if (currentFocus > -1) {
              if (x) x[currentFocus].click();
            }
          }
      });
      function addActive(x) {
        if (!x) return false;
        removeActive(x);
        if (currentFocus >= x.length) currentFocus = 0;
        if (currentFocus < 0) currentFocus = (x.length - 1);
        x[currentFocus].classList.add("autocomplete-active");
      }
      function removeActive(x) {
        for (var i = 0; i < x.length; i++) {
          x[i].classList.remove("autocomplete-active");
        }
      }
      function closeAllLists(elmnt) {

        var x = document.getElementsByClassName("autocomplete-items");
        for (var i = 0; i < x.length; i++) {
          if (elmnt != x[i] && elmnt != inp) {
            x[i].parentNode.removeChild(x[i]);
          }
        }
    }
        document.addEventListener("click", function (e) {
          closeAllLists(e.target);
        });
    }

    $.ajaxSetup({
                headers: {
                    'X-CSRF-TOKEN': $('meta[name="_token"]').attr('content')
                }
            });
    $.ajax({
        url: '/all_locations/',
        method: 'get',

        success: function(result){
            // console.log(result)
            for ( var i = 0, l = result.length; i < l; i++ ) {
                countries.push(result[i].location)
            }
            // console.log(countries)

        }
    });

    autocomplete(document.getElementById("myInput"), countries);
</script>
{% endblock %}